state = "P".

def("P") = act("p", "P1").
def("P1") = act("cs", "P2").
def("P2") = act("v", "P").

exec([]).
state(S), def(P) = E :- S == P | state(eval(E)).
state(eval(act(A, E))), exec(AL) :- exec([A|AL]), state(eval(E)).